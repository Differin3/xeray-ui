# Xeray UI — быстрый деплой

## Быстрый старт (GitHub)

1. Установите зависимости ОС: PHP 8+, SQLite3, unzip, git
2. Выполните скрипт деплоя:

Linux/macOS:

```bash
bash scripts/deploy.sh <GIT_REPO_URL> <TARGET_DIR>
```

Windows (PowerShell):

```powershell
./scripts/deploy.ps1 -RepoUrl <GIT_REPO_URL> -TargetDir <TARGET_DIR>
```

Скрипт клонирует репозиторий, создаёт директории `logs/` и `database/`, выставляет права, инициализирует SQLite (создастся при первом запуске), и запускает встроенный PHP‑сервер на `http://localhost:8080`.

## Ручной запуск (локально)

```bash
php -S localhost:8080 -t public
```

# Xeray UI - Панель управления для Xray Core

Xeray UI - это современная панель управления для Xray Core, которая позволяет управлять несколькими VPN-серверами без необходимости использования SSH-подключений. Вместо SSH используется специальный демон на Python, который устанавливается на каждом узле и управляет Xray Core, передавая данные и принимая конфигурации с основной панели.

## О проекте

Xray Core - это высокопроизводительное ядро VPN-сервиса, разработанное для создания современных прокси-сетей. Xeray UI предоставляет удобный веб-интерфейс для управления несколькими серверами, работающими на базе Xray Core.

### Основные возможности

- Управление несколькими серверами Xray Core
- Мониторинг состояния и статистики серверов
- Управление пользователями и квотами
- Настройка inbounds и outbounds
- Автоматическое обновление конфигураций
- Логирование всех действий
- Веб-интерфейс на HTML/CSS/JavaScript
- Серверная часть на PHP
- Демон на Python для удаленного управления серверами
- База данных на SQLite

## Технологии

- **Frontend**: HTML, CSS, JavaScript, Bootstrap
- **Backend**: PHP
- **Демон**: Python (aiohttp)
- **База данных**: SQLite
- **Ядро VPN**: Xray Core

## Структура проекта

```
xeray ui/
├── README.md              # Документация проекта
├── config.php             # Основной конфигурационный файл
├── daemon.py              # Демон для управления серверами XRay
├── backend/               # Серверная часть на PHP
│   ├── api/               # API-эндпоинты
│   │   ├── inbounds.php
│   │   ├── logs.php
│   │   ├── outbounds.php
│   │   ├── servers.php
│   │   ├── settings.php
│   │   ├── stats.php
│   │   └── users.php
│   └── core/              # Основная логика
│       ├── config.php
│       ├── database.php
│       ├── server_manager.php
│       └── server_manager_new.php
├── frontend/              # Клиентская часть
│   ├── Index.html         # Основной файл интерфейса
│   ├── assets/            # Статические ресурсы
│   ├── css/               # Стили
│   │   └── styles.css
│   └── js/                # JavaScript
│       ├── api.js         # Функции для работы с API
│       └── main.js        # Основной JavaScript файл
├── migrations/            # Миграции базы данных
└── public/                # Публичные файлы
    └── index.html         # Альтернативный интерфейс
```

## Архитектура

Проект использует многоуровневую архитектуру:

1. **Веб-интерфейс** (Frontend) - предоставляет пользователю удобный интерфейс для взаимодействия с системой
2. **API-сервер** (Backend) - обрабатывает запросы от веб-интерфейса и взаимодействует с базой данных
3. **Демон** (Python) - устанавливается на каждом узле и управляет Xray Core, передавая данные и принимая конфигурации
4. **База данных** (SQLite) - хранит информацию о серверах, пользователях, настройках и логах

## Особенности реализации

- Вместо SSH используется специальный демон на Python, который устанавливается на каждом узле
- Демон обеспечивает безопасное соединение с основной панелью через аутентификацию по секретному ключу
- Все конфигурации Xray Core генерируются автоматически на основе данных из базы
- Поддерживается горячее обновление конфигураций без перезапуска Xray Core
- Реализован мониторинг состояния серверов в реальном времени

## Установка и настройка

1. Склонируйте репозиторий
2. Настройте базу данных (автоматически создастся при первом запуске)
3. Настройте демон на каждом узле
4. Запустите веб-интерфейс

## Лицензия

Проект распространяется под лицензией MIT.
